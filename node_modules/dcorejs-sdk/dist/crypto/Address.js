"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var _ = require("lodash/fp");
var Utils_1 = require("../utils/Utils");
var Address = /** @class */ (function () {
    function Address(publicKey, encoded) {
        if (encoded === void 0) { encoded = Address.encode(publicKey); }
        this.publicKey = publicKey;
        this.encoded = encoded;
    }
    Address.parse = function (value) {
        return new Address(this.decode(value), value);
    };
    Address.decode = function (address) {
        var decoded = Buffer.from(Utils_1.Utils.Base58.decode(address.slice(3, address.length)));
        var key = decoded.slice(0, decoded.length - 4);
        var cks = decoded.slice(decoded.length - 4, decoded.length);
        var cksActual = Utils_1.Utils.ripemd160(key).slice(0, 4);
        Utils_1.assertThrow(_.isEqual(cks, cksActual), function () { return "checksum not valid for:" + address; });
        return key;
    };
    Address.encode = function (publicKey) {
        var cks = Utils_1.Utils.ripemd160(publicKey).slice(0, 4);
        return Address.PREFIX + Utils_1.Utils.Base58.encode(Buffer.concat([publicKey, cks]));
    };
    Address.PREFIX = "DCT";
    return Address;
}());
exports.Address = Address;
//# sourceMappingURL=Address.js.map